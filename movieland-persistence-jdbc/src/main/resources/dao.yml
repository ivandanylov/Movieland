dao:
  connection:
    urlEnvironmentVariableName: "JDBC_DATABASE_URL"
    driverClassName: "org.postgresql.Driver"

  query:
    getMovieById: >-
      SELECT
        id,
        name,
        original_name,
        issue_date,
        description,
        rating,
        price,
        poster_link
      FROM
        movieland.movie
      WHERE
        id = ?

    getAllMovies: >-
      SELECT
        id,
        name,
        original_name,
        issue_date,
        description,
        rating,
        price,
        poster_link
      FROM
          movieland.movie

    getRandomMovies: >-
      SELECT
        id,
        name,
        original_name,
        issue_date,
        description,
        rating,
        price,
        poster_link
      FROM
        movieland.movie
      ORDER BY
        random(),
        id
      LIMIT ?

    getMoviesByGenreId: >-
      SELECT
        m.id,
        m.name,
        m.original_name,
        m.issue_date,
        m.description,
        m.rating,
        m.price,
        m.poster_link
      FROM
        movieland.genre g
        JOIN movieland.bridge_movie_genre mg ON g.id = mg.genre_id
        JOIN movieland.movie m ON mg.movie_id = m.id
      WHERE
        g.id = ?

    getAllGenres: >-
      SELECT
        id,
        name
      FROM
        movieland.genre
      ORDER BY
        name

    getGenreById: >-
      SELECT
        id,
        name
      FROM
        movieland.genre
      WHERE
        id = ?

    getGenresByIdList: >-
      SELECT
        id,
        name
      FROM
        movieland.genre
      WHERE
        id IN (SELECT UNNEST(?))
      ORDER BY
        name

    getCountryById: >-
      SELECT
        id,
        name
      FROM
        movieland.country
      WHERE
        id = ?

    getAllCountries: >-
      SELECT
        id,
        name
      FROM
        movieland.country
      ORDER BY
        name

    getCountriesByIdList: >-
      SELECT
        id,
        name
      FROM
        movieland.country
      WHERE
        id IN (SELECT UNNEST(?))
      ORDER BY
        name

    getUserById: >-
      SELECT
        id,
        login
      FROM
        movieland.users
      WHERE
        id = ?

    getAllUsers: >-
      SELECT
        id,
        login
      FROM
        movieland.users
      ORDER BY
        login

    getUsersByIdList: >-
      SELECT
        id,
        login
      FROM
        movieland.users
      WHERE
        id IN (SELECT UNNEST(?))
      ORDER BY
        login

    getReviewsByMovieId: >-
      SELECT
        id,
        user_id,
        review_text
      FROM
        movieland.review
      WHERE
        movie_id = ?
      ORDER BY
        review_datetime DESC

  config:
    randomMovieRowsCount: 3

  scheduler:
    #4*60*60*1000 (4h in milliseconds)
    genreFixedDelayInMilliseconds: 14400000
    genreInitialDelayInMilliseconds: 1000

    #4*60*60*1000 (4h in milliseconds)
    countryFixedDelayInMilliseconds: 14400000
    countryInitialDelayInMilliseconds: 1000